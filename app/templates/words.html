{% extends "base.html" %}

{% block title %}Word List - Emily Word Tracker{% endblock %}


{% block content %}
<div class="page-header">
    <h1>Word List</h1>
    <span class="word-count-badge">{{ words|length }} word{% if words|length != 1 %}s{% endif %}</span>
</div>

<div class="controls-section">
    <form method="GET" action="{{ url_for('main.word_list') }}">
        <div class="controls-row">
            <div class="control-group">
                <label for="sort">Sort By</label>
                <select id="sort" name="sort" class="control-select">
                    <option value="date" {% if current_sort == 'date' %}selected{% endif %}>Date Added</option>
                    <option value="word" {% if current_sort == 'word' %}selected{% endif %}>Word (A-Z)</option>
                </select>
            </div>

            <div class="control-group">
                <label for="order">Order</label>
                <select id="order" name="order" class="control-select">
                    <option value="desc" {% if current_order == 'desc' %}selected{% endif %}>Newest First</option>
                    <option value="asc" {% if current_order == 'asc' %}selected{% endif %}>Oldest First</option>
                </select>
            </div>

            <div class="control-group">
                <label for="category">Category</label>
                <select id="category" name="category" class="control-select">
                    <option value="">All Categories</option>
                    {% for category in categories %}
                    <option value="{{ category.id }}" {% if current_category == category.id %}selected{% endif %}>{{ category.name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="control-group">
                <label for="user">Added By</label>
                <select id="user" name="user" class="control-select">
                    <option value="">All Users</option>
                    {% for user in users %}
                    <option value="{{ user.id }}" {% if current_user_filter == user.id %}selected{% endif %}>{{ user.display_name }}</option>
                    {% endfor %}
                </select>
            </div>

            <button type="submit" class="btn-apply">Apply</button>
            <a href="{{ url_for('main.word_list') }}" class="btn-clear">Clear</a>
            <a href="{{ url_for('main.export_csv') }}" class="btn-clear" style="margin-left: auto;">Export CSV</a>
        </div>
    </form>

    {% if current_category or current_user_filter %}
    <div class="active-filters">
        Active filters:
        {% if current_category %}
        <span class="filter-tag">Category: {{ categories|selectattr('id', 'equalto', current_category)|map(attribute='name')|first }}</span>
        {% endif %}
        {% if current_user_filter %}
        <span class="filter-tag">User: {{ users|selectattr('id', 'equalto', current_user_filter)|map(attribute='display_name')|first }}</span>
        {% endif %}
    </div>
    {% endif %}
</div>

{% include "partials/word_list.html" %}
{% endblock %}
